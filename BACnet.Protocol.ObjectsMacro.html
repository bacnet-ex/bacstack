<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="bacstack v0.1.0">


    <title>BACnet.Protocol.ObjectsMacro — bacstack v0.1.0</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-75D63F6F.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>
<!-- Markdown for details HTML tags -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>

<!-- Sortable tables -->
<style>
  table th {
    cursor: pointer;
  }

  table th[aria-sort="ascending"] span::after {
    content: "▲";
    color: currentcolor;
    font-size: 100%;
    top: 0;
    margin-left: 5px;
  }

  table th[aria-sort="descending"] span::after {
    content: "▼";
    color: currentcolor;
    font-size: 100%;
    top: 0;
    margin-left: 5px;
  }
</style>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="BACnet.html" class="sidebar-projectName" translate="no">
bacstack
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.0
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of bacstack</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">BACnet.Protocol.ObjectsMacro</span> 
    <small class="app-vsn" translate="no">(bacstack v0.1.0)</small>

  </h1>


    <section id="moduledoc">
<p>This is an internal module for defining BACnet objects.</p><p>If you're a library user, there's no need for you to ever deal with this module.</p><p>If you want to store the BACnet object definition AST as a persistent module
attribute (<code class="inline">:bacobj_ast</code>) in each BACnet object module, you can set the key <code class="inline">:store_bacobj_ast</code>
to <code class="inline">true</code> for the <code class="inline">:bacstack</code> application. If <code class="inline">:bacstack</code> is a dependency of your
Mix project, you will need to recompile bacstack with <code class="inline">mix deps.compile bacstack --force</code>.</p><p>The following has to be taken care of when trying decode/encode properties:</p><ul><li>Check the annotations for decoder/encoder functions (single argument - the plain value (no tag encoding))</li><li>Check the annotations for <code class="inline">encode_as</code> primitive type declaration (i.e. is used to declare enumerated booleans)</li><li>Check the properties types map - 99% should be covered by this (1% is covered by annoations)</li><li>Custom decoding/encoding by hand for special properties (not yet supported properties/objects)</li></ul>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#__using__/1" data-no-tooltip translate="no">__using__(opts)</a>

      </div>

        <div class="summary-synopsis"><p>Inserts an <code class="inline">import</code> for the <a href="#bac_object/2"><code class="inline">bac_object/2</code></a> macro.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#bac_object/2" data-no-tooltip translate="no">bac_object(object_type, definition)</a>

      </div>

        <div class="summary-synopsis"><p>Defines a BACnet object.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#define_bacnet_object/3" data-no-tooltip translate="no">define_bacnet_object(object_type, ast, env)</a>

      </div>

        <div class="summary-synopsis"><p>Defines a BACnet object. This function produces AST from the given BACnet object definition.
For a description of what it does, see the <a href="#bac_object/2"><code class="inline">bac_object/2</code></a> macro.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_bacnet_datetime/0" data-no-tooltip translate="no">get_default_bacnet_datetime()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet DateTime with every field <code class="inline">:unspecified</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_bacnet_timestamp/0" data-no-tooltip translate="no">get_default_bacnet_timestamp()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Timestamp with a <a href="https://hexdocs.pm/elixir/DateTime.html"><code class="inline">DateTime</code></a> and every field <code class="inline">:unspecified</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_dev_object_ref/0" data-no-tooltip translate="no">get_default_dev_object_ref()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Device Object Property Reference. References a BI object with the
highest instance number, referencing the highest property identifier.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_event_message_texts/0" data-no-tooltip translate="no">get_default_event_message_texts()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Event Message Texts with default English strings.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_event_transbits/1" data-no-tooltip translate="no">get_default_event_transbits(default_value \\ true)</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Event Transition Bits with each bit set to a specific value.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_object_ref/0" data-no-tooltip translate="no">get_default_object_ref()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Object Property Reference. References a BI object with the
highest instance number, referencing the highest property identifier.</p></div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="__using__/1">

  <div class="detail-header">
    <a href="#__using__/1" class="detail-link" data-no-tooltip title="Link to this macro">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature" translate="no">__using__(opts)</h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L250" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Inserts an <code class="inline">import</code> for the <a href="#bac_object/2"><code class="inline">bac_object/2</code></a> macro.</p>
  </section>
</section>
<section class="detail" id="bac_object/2">

  <div class="detail-header">
    <a href="#bac_object/2" class="detail-link" data-no-tooltip title="Link to this macro">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature" translate="no">bac_object(object_type, definition)</h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L455" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Defines a BACnet object.</p><p>This macro generates the struct, the necessary functions, helpers, types
and module documentation and inserts these into the AST of the module.</p><p>Use <a href="#define_bacnet_object/3"><code class="inline">define_bacnet_object/3</code></a> to use something that can be used outside of a module
(it produces AST for <a href="#bac_object/2"><code class="inline">bac_object/2</code></a>).</p><p>The following functions for working with objects get generated:</p><ul><li><code class="inline">add_property/3</code></li><li><code class="inline">create/4</code></li><li><code class="inline">cov_reporting?/1</code></li><li><code class="inline">get_object_identifier/1</code></li><li><code class="inline">get_properties/1</code></li><li><code class="inline">has_property?/2</code></li><li><code class="inline">intrinsic_reporting?/1</code></li><li><code class="inline">property_writable?/2</code></li><li><code class="inline">remove_property/2</code></li><li><code class="inline">update_property/3</code></li></ul><p>The <code class="inline">property_writable/2</code> function should be overridden by modules to set certain
properties writable only during certain conditions, if this is required by the object.</p><p>The following functions get generated based on the available properties (priority_array):</p><ul><li><code class="inline">get_priority_value/1</code></li><li><code class="inline">set_priority/3</code></li></ul><p>The following helper functions get generated:</p><ul><li><code class="inline">get_all_properties/0</code></li><li><code class="inline">get_cov_properties/0</code></li><li><code class="inline">get_intrinsic_properties/0</code></li><li><code class="inline">get_optional_properties/0</code></li><li><code class="inline">get_properties_type_map/0</code></li><li><code class="inline">get_protected_properties/0</code></li><li><code class="inline">get_readonly_properties/0</code></li><li><code class="inline">get_required_properties/0</code></li><li><code class="inline">supports_intrinsic/0</code></li></ul><p>The following types get generated:</p><ul><li><code class="inline">common_object_opts/0</code> (for basic BACnet object options)</li><li><code class="inline">property_name/0</code></li><li><code class="inline">property_update_error/0</code></li><li><code class="inline">t/0</code></li></ul><p>For convenience, the <code class="inline">fetch/2</code> function will be implemented for use with the <a href="https://hexdocs.pm/elixir/Access.html"><code class="inline">Access</code></a> behaviour.
All other <a href="https://hexdocs.pm/elixir/Access.html"><code class="inline">Access</code></a> behaviour callbacks/functions will not be implemented.</p><p>To use this macro, you need to pass it the BACnet object type (<code class="inline">t:Constants.object_type/0</code>) and
the definition of the object in a <code class="inline">do</code> block.</p><p>The definition is built up using the following macros:</p><ul><li><code class="inline">services/1</code> - Defines which services are available in keyword notation (services: <code class="inline">intrinsic</code>).</li><li><code class="inline">field/3</code> - Defines each field/property of the object. First the name, then the Elixir typespec,
following options. When writing typespecs, the typespec will be resolved. It must be noted, not
all types are supported (i.e. plain maps). The following options are available:<ul><li><code class="inline">annotation</code> - Can be used multiple times. Allows to add annotations to the field which can be retrieved
using <code class="inline">get_annotation/1</code>. The return value is always a list. The given argument must be allowed to be
escaped (such as no evaluated functions).
The given argument should be <code class="inline">{:field_name, value}</code> or <code class="inline">[field_name: value]</code>.
The whole annotations list is flattened, to allow keyword based access through <code class="inline">get_annotation/1</code>.</li><li><code class="inline">bac_type</code> - Used to override the inherited type from the typespec,
which is then used for property value typechecks. The value of this field is to be a valid type of
<code class="inline">t:Internal.typechecker_types/0</code> or
<code class="inline">{:with_validator, type of Internal.typechecker_types/0, validator function quote block or capture}</code>.
Types given through this option will not be further validated and may lead to runtime errors when
incorrectly used.</li><li><code class="inline">cov</code> - Property is part of COV Reporting (the &quot;main&quot; property for reporting changes).</li><li><code class="inline">default</code> - Default value for the property. This can be a constant value, function call,
anonymous function or capture expression (arity 0!).
Function calls, definitions and captures are executed at compile time.</li><li><code class="inline">implicit_relationship</code> - Implicit relationship between two properties.
The other property gets automatically added, if one of the relationship gets added.</li><li><code class="inline">init_fun</code> - Used to initialize the property with an initial value
(only remote function captures with arity 0 allowed). Properties with an <code class="inline">init_fun</code> get added to the property
as if the property was required and had a default value, if it's not a remote object.</li><li><code class="inline">intrinsic</code> - Property is part of Intrinsic Reporting.</li><li><code class="inline">protected</code> - The property can not be changed through the functions (i.e. <code class="inline">object_instance</code> can not be mutated).</li><li><code class="inline">readonly</code> - Annotation that the property should only be readonly (write protected from the BACnet side).</li><li><code class="inline">required</code> - Required property, must always be present.</li><li><code class="inline">validator_fun</code> - Used to verify the property value before inserting.
This function can accept, zero, one or two arguments (the value and the object itself). During object creation,
the function will get a plain map of the currently accumulated properties as object.</li></ul></li></ul><p>The macro will verify the structure. Fields with implicit relationships should always have a default value.
Object creation will otherwise fail.</p><p>When creating an object and a required property has no default and no value is given at creation,
object creation will fail.</p><p>If an object gets created and only one property gets specified of an implicit relationship, the other
property gets automatically added (which explains why it should have a default value).</p><p>An example definition looks like this:</p><pre><code class="makeup elixir" translate="no"><span class="n">bac_object</span><span class="w"> </span><span class="ss">:analog_input</span><span class="w"> </span><span class="k" data-group-id="4779133650-1">do</span><span class="w">
  </span><span class="n">services</span><span class="p" data-group-id="4779133650-2">(</span><span class="ss">intrinsic</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="4779133650-2">)</span><span class="w">

  </span><span class="n">field</span><span class="p" data-group-id="4779133650-3">(</span><span class="ss">:description</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p" data-group-id="4779133650-4">(</span><span class="p" data-group-id="4779133650-4">)</span><span class="p" data-group-id="4779133650-3">)</span><span class="w"> </span><span class="c1"># Optional property</span><span class="w">
  </span><span class="n">field</span><span class="p" data-group-id="4779133650-5">(</span><span class="ss">:device_type</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p" data-group-id="4779133650-6">(</span><span class="p" data-group-id="4779133650-6">)</span><span class="p" data-group-id="4779133650-5">)</span><span class="w"> </span><span class="c1"># Optional property</span><span class="w">
  </span><span class="n">field</span><span class="p" data-group-id="4779133650-7">(</span><span class="ss">:out_of_service</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="p" data-group-id="4779133650-8">(</span><span class="p" data-group-id="4779133650-8">)</span><span class="p">,</span><span class="w"> </span><span class="ss">required</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="4779133650-7">)</span><span class="w"> </span><span class="c1"># Required property, has an implicit default value</span><span class="w">
  </span><span class="n">field</span><span class="p" data-group-id="4779133650-9">(</span><span class="ss">:present_value</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="p" data-group-id="4779133650-10">(</span><span class="p" data-group-id="4779133650-10">)</span><span class="p">,</span><span class="w"> </span><span class="ss">required</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="4779133650-9">)</span><span class="w"> </span><span class="c1"># Required property, has a default value</span><span class="w">
</span><span class="k" data-group-id="4779133650-1">end</span></code></pre><p>The following properties have an implicit default value:</p><ul><li>event_state (<code class="inline">:normal</code>)</li><li>out_of_service (<code class="inline">false</code>)</li><li>status_flags (all bits <code class="inline">false</code>)</li></ul><p>The following implicit relationships exist and do not need to be manually defined:</p><ul><li>priority_array &lt;-&gt; relinquish_default</li></ul><p>The following properties are implicitely protected:</p><ul><li>object_identifier (does not exist on the struct)</li><li>object_type (does not exist on the struct)</li><li>properties_list (does not exist as property on the struct - properties are tracked in metadata)</li></ul><p>Both properties which do not exist are inherited from the module. Properties list is tracked internally
and thus protected from mutation through the functions. These properties need to be dynamically
inherited through the device server for the BACnet side to conform to the BACnet standard.</p><p>For input objects, the device server needs to implement the present value write protection for when
the object is not out of service. The object itself does not provide such a mechanism as it does
not know from where the write is happening (locally from the device or through BACnet).</p><p>The following properties are required for all objects and are automatically defined:</p><ul><li>object_instance (annotated as readonly)</li><li>object_name (annotated as readonly)</li></ul><p>For intrinsic objects, the following properties are automatically defined (with a default value):</p><ul><li>acked_transitions (annotated as readonly)</li><li>event_algorithm_inhibit</li><li>event_algorithm_inhibit_ref</li><li>event_detection_enable</li><li>event_enable</li><li>event_message_texts (annotated as readonly)</li><li>event_message_texts_config</li><li>event_timestamps (annotated as readonly)</li><li>limit_enable</li><li>notify_type</li><li>notification_class</li><li>time_delay</li><li>time_delay_normal</li></ul><p>For commandable objects (objects with a priority array), the present value property is protected,
unless out of service is active. For the duration of out of service, updates to the present value
using <code class="inline">update_property/3</code> are allowed. Once out of service is disabled, the present value is once
again protected from updates, as the present value is updated through the relinquish_default and
priority_array properties.</p><p>Lastly, when using annotations, annotations with the key name <code class="inline">required_when</code> will be respected,
if their value is supported. <code class="inline">required_when</code> can be used to conditionally require certain properties.
The following values are supported:</p><ul><li><code class="inline">{:property, Constants.property_identifier()}</code> - The given property must be present in the object.</li><li><code class="inline">{:property, Constants.property_identifier(), value}</code> - The given property must be present
in the object and have the specified value.</li><li><code class="inline">{:property, Constants.property_identifier(), operator, value}</code> - The given property must be present
in the object and have the specified value. The value is compared using the given operator from
the <a href="https://hexdocs.pm/elixir/Kernel.html"><code class="inline">Kernel</code></a> module (must be a function in said module).</li><li><code class="inline">{:opts, atom()}</code> - The given option must be present in the object options (given in <code class="inline">create/4</code>)
and have the value <code class="inline">true</code>.</li><li><code class="inline">{:opts, atom(), value}</code> - The given option must be present in the object options
and have the specified value.</li><li><code class="inline">{:opts, atom(), operator, value}</code> - The given option must be present
in the object options and have the specified value. The value is compared using the given
operator from the <a href="https://hexdocs.pm/elixir/Kernel.html"><code class="inline">Kernel</code></a> module (must be a function in said module).</li><li><code class="inline">(map() -&gt; boolean())</code> - Function with arity 1, receives the currently
accumulated properties. Returning <code class="inline">true</code> means the property is required.</li><li><code class="inline">(map(), map() -&gt; boolean())</code> - Function with arity 2, receives the currently
accumulated properties and the metadata map. Returning <code class="inline">true</code> means the property is required.</li></ul><p>Other values than the supported values get simply ignored - there's no error or warning.</p><p>For example, to have the following field being marked as required (than by default being optional),
it requires the option <code class="inline">:supports_restart</code> to be <code class="inline">true</code>:</p><pre><code class="makeup elixir" translate="no"><span class="n">field</span><span class="p" data-group-id="9082903524-1">(</span><span class="w">
  </span><span class="ss">:last_restart_reason</span><span class="p">,</span><span class="w">
  </span><span class="nc">Constants</span><span class="o">.</span><span class="n">restart_reason</span><span class="p" data-group-id="9082903524-2">(</span><span class="p" data-group-id="9082903524-2">)</span><span class="p">,</span><span class="w">
  </span><span class="ss">annotation</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9082903524-3">[</span><span class="ss">required_when</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9082903524-4">{</span><span class="ss">:opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:supports_restart</span><span class="p" data-group-id="9082903524-4">}</span><span class="p" data-group-id="9082903524-3">]</span><span class="w">
</span><span class="p" data-group-id="9082903524-1">)</span></code></pre><p>When instantiating the instance the said option is given with the value <code class="inline">true</code>,
then the property is required and must either have a default value or be explicitely given.
If the property does not have a default value or is not given, the instantiation fails with an error.
If the said option is not given (or with value <code class="inline">false</code>), then the property stays optional.</p><p>To have the property only present and can only be instantiated when the property is required,
to meet BACnet requirements to have some properties only present when some condition is met,
the annotation <code class="inline">only_when</code> is supported. It supports the same values as <code class="inline">required_when</code>.</p><p>That means, the optional property can not be used unless the <code class="inline">required_when</code> test passes true.
The exception being remote objects, where all optional properties can always be used,
as these our outside of our responsibility.</p>
  </section>
</section>
<section class="detail" id="define_bacnet_object/3">

  <div class="detail-header">
    <a href="#define_bacnet_object/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">define_bacnet_object(object_type, ast, env)</h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L469" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> define_bacnet_object(
  <a href="BACnet.Protocol.Constants.html#t:object_type/0">BACnet.Protocol.Constants.object_type</a>(),
  <a href="https://hexdocs.pm/elixir/Macro.html#t:t/0">Macro.t</a>(),
  <a href="https://hexdocs.pm/elixir/Macro.Env.html#t:t/0">Macro.Env.t</a>()
) ::
  <a href="https://hexdocs.pm/elixir/Macro.html#t:t/0">Macro.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Defines a BACnet object. This function produces AST from the given BACnet object definition.
For a description of what it does, see the <a href="#bac_object/2"><code class="inline">bac_object/2</code></a> macro.</p>
  </section>
</section>
<section class="detail" id="get_default_bacnet_datetime/0">

  <div class="detail-header">
    <a href="#get_default_bacnet_datetime/0" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_default_bacnet_datetime()</h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L158" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_bacnet_datetime() :: <a href="BACnet.Protocol.BACnetDateTime.html#t:t/0">BACnet.Protocol.BACnetDateTime.t</a>()</pre>

      </div>

<p>Get a default BACnet DateTime with every field <code class="inline">:unspecified</code>.</p>
  </section>
</section>
<section class="detail" id="get_default_bacnet_timestamp/0">

  <div class="detail-header">
    <a href="#get_default_bacnet_timestamp/0" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_default_bacnet_timestamp()</h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L179" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_bacnet_timestamp() :: <a href="BACnet.Protocol.BACnetTimestamp.html#t:t/0">BACnet.Protocol.BACnetTimestamp.t</a>()</pre>

      </div>

<p>Get a default BACnet Timestamp with a <a href="https://hexdocs.pm/elixir/DateTime.html"><code class="inline">DateTime</code></a> and every field <code class="inline">:unspecified</code>.</p>
  </section>
</section>
<section class="detail" id="get_default_dev_object_ref/0">

  <div class="detail-header">
    <a href="#get_default_dev_object_ref/0" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_default_dev_object_ref()</h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L214" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_dev_object_ref() :: <a href="BACnet.Protocol.DeviceObjectPropertyRef.html#t:t/0">BACnet.Protocol.DeviceObjectPropertyRef.t</a>()</pre>

      </div>

<p>Get a default BACnet Device Object Property Reference. References a BI object with the
highest instance number, referencing the highest property identifier.</p><p>The highest instance number usually represents an uninitialized property.</p>
  </section>
</section>
<section class="detail" id="get_default_event_message_texts/0">

  <div class="detail-header">
    <a href="#get_default_event_message_texts/0" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_default_event_message_texts()</h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L187" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_event_message_texts() :: <a href="BACnet.Protocol.EventMessageTexts.html#t:t/0">BACnet.Protocol.EventMessageTexts.t</a>()</pre>

      </div>

<p>Get a default BACnet Event Message Texts with default English strings.</p>
  </section>
</section>
<section class="detail" id="get_default_event_transbits/1">

    <span id="get_default_event_transbits/0"></span>

  <div class="detail-header">
    <a href="#get_default_event_transbits/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_default_event_transbits(default_value \\ true)</h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L199" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_event_transbits(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()) ::
  <a href="BACnet.Protocol.EventTransitionBits.html#t:t/0">BACnet.Protocol.EventTransitionBits.t</a>()</pre>

      </div>

<p>Get a default BACnet Event Transition Bits with each bit set to a specific value.</p>
  </section>
</section>
<section class="detail" id="get_default_object_ref/0">

  <div class="detail-header">
    <a href="#get_default_object_ref/0" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_default_object_ref()</h1>

      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L234" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_object_ref() :: <a href="BACnet.Protocol.ObjectPropertyRef.html#t:t/0">BACnet.Protocol.ObjectPropertyRef.t</a>()</pre>

      </div>

<p>Get a default BACnet Object Property Reference. References a BI object with the
highest instance number, referencing the highest property identifier.</p><p>The highest instance number usually represents an uninitialized property
(such as in the case for <code class="inline">event_algorithm_inhibit_ref</code>).</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="bacstack.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>
<!-- Markdown for details HTML tags & sortable tables -->
<script>
  class TableSortableColumns {
    constructor(tableNode) {
      this.tableNode = tableNode;
      this.columnHeaders = tableNode.querySelectorAll('thead th');
      this.sortColumns = [];

      for (var i = 0; i < this.columnHeaders.length; i++) {
        var ch = this.columnHeaders[i];

        if (ch) {
          ch.innerHTML += '<span aria-hidden="true"></span>';
          this.sortColumns.push(i);
          ch.setAttribute('data-column-index', i);
          ch.addEventListener('click', this.handleClick.bind(this));
        }
      }
    }

    setColumnHeaderSort(columnIndex) {
      if (typeof columnIndex === 'string') {
        columnIndex = parseInt(columnIndex);
      }

      for (var i = 0; i < this.columnHeaders.length; i++) {
        var ch = this.columnHeaders[i];

        if (i === columnIndex) {
          var value = ch.getAttribute('aria-sort');

          if (value === 'ascending') {
            ch.setAttribute('aria-sort', 'descending');
            this.sortColumn(
              columnIndex,
              'descending',
              ch.classList.contains('num')
            );
          } else {
            ch.setAttribute('aria-sort', 'ascending');
            this.sortColumn(
              columnIndex,
              'ascending',
              ch.classList.contains('num')
            );
          }
        } else if (ch.hasAttribute('aria-sort')) {
          ch.removeAttribute('aria-sort');
        }
      }
    }

    sortColumn(columnIndex, sortValue, isNumber) {
      function compareValues(a, b) {
        isNumber = !isNaN(parseFloat(a.value)) && !isNaN(parseFloat(b.value))

        if (sortValue === 'ascending') {
          if (a.value === b.value) {
            return 0;
          } else {
            if (isNumber) {
              return a.value - b.value;
            } else {
              return a.value < b.value ? -1 : 1;
            }
          }
        } else {
          if (a.value === b.value) {
            return 0;
          } else {
            if (isNumber) {
              return b.value - a.value;
            } else {
              return a.value > b.value ? -1 : 1;
            }
          }
        }
      }

      if (typeof isNumber !== 'boolean') {
        isNumber = false;
      }

      var tbodyNode = this.tableNode.querySelector('tbody');
      var rowNodes = [];
      var dataCells = [];

      var rowNode = tbodyNode.firstElementChild;

      var index = 0;
      while (rowNode) {
        rowNodes.push(rowNode);

        var rowCells = rowNode.querySelectorAll('th, td');
        var dataCell = rowCells[columnIndex];
        var data = {};

        data.index = index;
        data.value = dataCell.textContent.toLowerCase().trim();
        if (isNumber) {
          data.value = parseFloat(data.value);
        }

        dataCells.push(data);
        rowNode = rowNode.nextElementSibling;
        index += 1;
      }

      dataCells.sort(compareValues);

      while (tbodyNode.firstChild) {
        tbodyNode.removeChild(tbodyNode.lastChild);
      }

      for (var i = 0; i < dataCells.length; i += 1) {
        tbodyNode.appendChild(rowNodes[dataCells[i].index]);
      }
    }

    handleClick(event) {
      var target = event.currentTarget;
      this.setColumnHeaderSort(target.getAttribute('data-column-index'));
    }
  }

  document.addEventListener('DOMContentLoaded', function () {
    // This is the part where we load the <details> contents,
    // parse it using markdown and push the HTML back
    var converter = new showdown.Converter({});
    converter.setFlavor('github');

    var details = document.querySelectorAll('details');
    for (var i = 0; i < details.length; i++) {
      details[i].innerHTML = converter.makeHtml(details[i].innerHTML);
    }

    // Now apply sortable tables, because <details> could contain tables
    var tables = document.querySelectorAll('table');
    for (var i = 0; i < tables.length; i++) {
      new TableSortableColumns(tables[i]);
    }
  });
</script>

  </body>
</html>

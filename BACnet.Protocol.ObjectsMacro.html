<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.40.1">
    <meta name="project" content="bacstack v0.1.0">


    <title>BACnet.Protocol.ObjectsMacro — bacstack v0.1.0</title>

    <link rel="stylesheet" href="dist/html-elixir-YJO4MOOW.css" />

    <script defer src="dist/sidebar_items-C7FAD1DE.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-YU4BZFVS.js"></script>
<!-- Markdown for details HTML tags -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>

<!-- Sortable tables -->
<style>
  table th {
    cursor: pointer;
  }

  table th[aria-sort="ascending"] span::after {
    content: "▲";
    color: currentcolor;
    font-size: 100%;
    top: 0;
    margin-left: 5px;
  }

  table th[aria-sort="descending"] span::after {
    content: "▼";
    color: currentcolor;
    font-size: 100%;
    top: 0;
    margin-left: 5px;
  }
</style>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="BACnet.html" class="sidebar-projectName" translate="no">
bacstack
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras="Pages"></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of bacstack</span>
            <div class="search-input-wrapper">
              <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
              <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
                <i class="ri-close-line ri-lg" title="Cancel search"></i>
              </button>
            </div>
          </label>
        </form>
        <div class="autocomplete">
        </div>
        <div class="engine-selector" data-multiple="false">
          <button type="button" class="engine-button" aria-label="Select search engine" aria-haspopup="true" aria-expanded="false">
            <i class="ri-search-2-line" aria-hidden="true"></i>
            <span class="engine-name">Default</span>
            <i class="ri-arrow-down-s-line" aria-hidden="true"></i>
          </button>
          <div class="engine-dropdown" hidden role="menu">

              <button type="button"
                      class="engine-option"
                      data-engine-url="search.html?q="
                      role="menuitemradio"
                      aria-checked="true">
                <span class="name">Default</span>
                <span class="help">In-browser search</span>
              </button>

          </div>
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">BACnet.<wbr>Protocol.<wbr>ObjectsMacro</span> 
      <small class="app-vsn" translate="no">(bacstack v0.1.0)</small>

    </h1>

<a href="BACnet.Protocol.ObjectsMacro.md" title="Copy Markdown (hold Ctrl/Cmd and click it to open as Markdown)" class="copy-markdown icon-action" rel="help">
  <i class="ri-markdown-line" aria-hidden="true"></i>
  <span class="sr-only">Copy Markdown</span>
</a>



      <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>This is an internal module for defining BACnet objects.</p><p>If you're a library user, there's no need for you to ever deal with this module.</p><p>If you want to store the BACnet object definition AST as a persistent module
attribute (<code class="inline">:bacobj_ast</code>) in each BACnet object module, you can set the key <code class="inline">:store_bacobj_ast</code>
to <code class="inline">true</code> for the <code class="inline">:bacstack</code> application. If <code class="inline">:bacstack</code> is a dependency of your
Mix project, you will need to recompile bacstack with <code class="inline">mix deps.compile bacstack --force</code>.</p><p>The following has to be taken care of when trying decode/encode properties:</p><ul><li>Check the annotations for decoder/encoder functions (single argument - the plain value (no tag encoding))</li><li>Check the annotations for <code class="inline">encode_as</code> primitive type declaration (i.e. used to declare enumerated booleans)</li><li>Check the properties types map - 99% should be covered by this (1% is covered by annotations)</li><li>Custom decoding/encoding by hand for special properties (not yet supported properties/objects)</li></ul>
    </section>

</div>

  <section id="summary" class="details-list">
    <h2 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h2>
<div class="summary-types summary">
  <h3>
    <a href="#types">Types</a>
  </h3>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:decoder/0" data-no-tooltip="" translate="no">decoder()</a>

      </div>

        <div class="summary-synopsis"><p>BACnet object property decoder function for annotation <code class="inline">decoder</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:encoder/0" data-no-tooltip="" translate="no">encoder()</a>

      </div>

        <div class="summary-synopsis"><p>BACnet object property encoder function for annotation <code class="inline">encoder</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:required_only_when/0" data-no-tooltip="" translate="no">required_only_when()</a>

      </div>

        <div class="summary-synopsis"><p>Supported values for annotation <code class="inline">required_when</code> and <code class="inline">only_when</code>.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h3>
    <a href="#functions">Functions</a>
  </h3>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#__using__/1" data-no-tooltip="" translate="no">__using__(opts)</a>

      </div>

        <div class="summary-synopsis"><p>Inserts an <code class="inline">import</code> for the <a href="#bac_object/2"><code class="inline">bac_object/2</code></a> macro.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#bac_object/2" data-no-tooltip="" translate="no">bac_object(object_type, definition)</a>

      </div>

        <div class="summary-synopsis"><p>Defines a BACnet object.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#define_bacnet_object/3" data-no-tooltip="" translate="no">define_bacnet_object(object_type, ast, env)</a>

      </div>

        <div class="summary-synopsis"><p>Defines a BACnet object. This function produces AST from the given BACnet object definition.
For a description of what it does, see the <a href="#bac_object/2"><code class="inline">bac_object/2</code></a> macro.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_bacnet_datetime/0" data-no-tooltip="" translate="no">get_default_bacnet_datetime()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet DateTime with every field <code class="inline">:unspecified</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_bacnet_timestamp/0" data-no-tooltip="" translate="no">get_default_bacnet_timestamp()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Timestamp with a <a href="https://hexdocs.pm/elixir/DateTime.html"><code class="inline">DateTime</code></a> and every field <code class="inline">:unspecified</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_dev_object_ref/0" data-no-tooltip="" translate="no">get_default_dev_object_ref()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Device Object Property Reference. References a BI object with the
highest instance number, referencing the highest property identifier.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_event_message_texts/0" data-no-tooltip="" translate="no">get_default_event_message_texts()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Event Message Texts with default English strings.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_event_transbits/1" data-no-tooltip="" translate="no">get_default_event_transbits(default_value \\ true)</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Event Transition Bits with each bit set to a specific value.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_default_object_ref/0" data-no-tooltip="" translate="no">get_default_object_ref()</a>

      </div>

        <div class="summary-synopsis"><p>Get a default BACnet Object Property Reference. References a BI object with the
highest instance number, referencing the highest property identifier.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h2 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h2>

    <div class="types-list">
<section class="detail" id="t:decoder/0">

  <div class="detail-header">
    <a href="#t:decoder/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">decoder()</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L163" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> decoder() ::
  (<a href="BACnet.Protocol.ApplicationTags.Encoding.html#t:t/0">BACnet.Protocol.ApplicationTags.Encoding.t</a>()
   | [<a href="BACnet.Protocol.ApplicationTags.Encoding.html#t:t/0">BACnet.Protocol.ApplicationTags.Encoding.t</a>()] -&gt;
     {:ok, <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()} | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()} | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>())</pre>

      </div>

<p>BACnet object property decoder function for annotation <code class="inline">decoder</code>.</p><p>Used by <a href="BACnet.Protocol.ObjectsUtility.html#cast_property_to_value/4"><code class="inline">BACnet.Protocol.ObjectsUtility.cast_property_to_value/4</code></a>.</p><p><code class="inline">term()</code> as return is the same as <code class="inline">{:ok, term()}</code>.</p>
  </section>
</section>
<section class="detail" id="t:encoder/0">

  <div class="detail-header">
    <a href="#t:encoder/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">encoder()</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L170" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> encoder() ::
  (<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>() -&gt;
     {:ok,
      <a href="BACnet.Protocol.ApplicationTags.Encoding.html#t:t/0">BACnet.Protocol.ApplicationTags.Encoding.t</a>()
      | [<a href="BACnet.Protocol.ApplicationTags.Encoding.html#t:t/0">BACnet.Protocol.ApplicationTags.Encoding.t</a>()]
      | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()}
     | {:error, <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()})</pre>

      </div>

<p>BACnet object property encoder function for annotation <code class="inline">encoder</code>.</p><p>Used by <a href="BACnet.Protocol.ObjectsUtility.html#cast_value_to_property/4"><code class="inline">BACnet.Protocol.ObjectsUtility.cast_value_to_property/4</code></a>.</p>
  </section>
</section>
<section class="detail" id="t:required_only_when/0">

  <div class="detail-header">
    <a href="#t:required_only_when/0" class="detail-link" data-no-tooltip="" aria-label="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">required_only_when()</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L177" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> required_only_when() ::
  {:property, name :: <a href="BACnet.Protocol.Constants.html#t:property_identifier/0">BACnet.Protocol.Constants.property_identifier</a>()}
  | {:property, name :: <a href="BACnet.Protocol.Constants.html#t:property_identifier/0">BACnet.Protocol.Constants.property_identifier</a>(),
     value :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()}
  | {:property, name :: <a href="BACnet.Protocol.Constants.html#t:property_identifier/0">BACnet.Protocol.Constants.property_identifier</a>(),
     operator :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), value :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()}
  | {:opts, name :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()}
  | {:opts, name :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), value :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()}
  | {:opts, name :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), operator :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), value :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()}
  | (properties_so_far :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() -&gt; <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>())
  | (properties_so_far :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), metadata :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() -&gt; <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>())</pre>

      </div>

<p>Supported values for annotation <code class="inline">required_when</code> and <code class="inline">only_when</code>.</p><p><code class="inline">operator</code> must be a function from the module <a href="https://hexdocs.pm/elixir/Kernel.html"><code class="inline">Kernel</code></a>.</p>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h2 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h2>

    <div class="functions-list">
<section class="detail" id="__using__/1">

  <div class="detail-header">
    <a href="#__using__/1" class="detail-link" data-no-tooltip="" aria-label="Link to this macro">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">__using__(opts)</h1>

        <span class="note">(macro)</span>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L284" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Inserts an <code class="inline">import</code> for the <a href="#bac_object/2"><code class="inline">bac_object/2</code></a> macro.</p>
  </section>
</section>
<section class="detail" id="bac_object/2">

  <div class="detail-header">
    <a href="#bac_object/2" class="detail-link" data-no-tooltip="" aria-label="Link to this macro">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">bac_object(object_type, definition)</h1>

        <span class="note">(macro)</span>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L546" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Defines a BACnet object.</p><p>This macro generates the struct, the necessary functions, helpers, types
and module documentation and inserts these into the AST of the module.</p><p>Use <a href="#define_bacnet_object/3"><code class="inline">define_bacnet_object/3</code></a> to use something that can be used outside of a module
(it produces AST for <a href="#bac_object/2"><code class="inline">bac_object/2</code></a>).</p><h3 id="bac_object/2-definition" class="section-heading"><a href="#bac_object/2-definition" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Definition</span></h3><p>To use this macro, you need to pass it the BACnet object type (<a href="BACnet.Protocol.Constants.html#t:object_type/0"><code class="inline">BACnet.Protocol.Constants.object_type/0</code></a>) and
the definition of the object in a <code class="inline">do</code> block.</p><p>The definition is built up using the following macros:</p><ul><li><code class="inline">services/1</code> - Defines which services are available in keyword notation (services: <code class="inline">intrinsic</code>).</li><li><code class="inline">field/3</code> - Defines each field/property of the object. First the name, then the Elixir typespec,
following options. When writing typespecs, the typespec will be resolved. It must be noted, not
all types are supported (i.e. plain maps). The following options are available:<ul><li><code class="inline">annotation</code> - Can be used multiple times. Allows to add annotations to the field which can be retrieved
using <code class="inline">get_annotation/1</code>. The return value is always a list. The given argument must be allowed to be
escaped (such as no evaluated functions).
The given argument should be <code class="inline">{:field_name, value}</code> or <code class="inline">[field_name: value]</code>.
The whole annotations list is flattened, to allow keyword based access through <code class="inline">get_annotation/1</code>.</li><li><code class="inline">bac_type</code> - Used to override the inherited type from the typespec,
which is then used for property value typechecks. The value of this field is to be a valid type of
<code class="inline">t:Internal.typechecker_types/0</code> or
<code class="inline">{:with_validator, type of Internal.typechecker_types/0, validator function quote block or capture}</code>.
Types given through this option will not be further validated and may lead to runtime errors when
incorrectly used.</li><li><code class="inline">cov</code> - Property is part of COV Reporting (the &quot;main&quot; property for reporting changes).</li><li><code class="inline">default</code> - Default value for the property. This can be a constant value, function call,
anonymous function or capture expression (arity 0!).
Function calls, definitions and captures are executed at compile time.</li><li><code class="inline">implicit_relationship</code> - Implicit relationship between two properties.
The other property gets automatically added, if one of the relationship gets added.</li><li><code class="inline">init_fun</code> - Used to initialize the property with an initial value
(only remote function captures with arity 0 allowed). Properties with an <code class="inline">init_fun</code> get added to the object
as if the property was required and had a default value, if it's not a remote object.</li><li><code class="inline">intrinsic</code> - Property is part of Intrinsic Reporting.</li><li><code class="inline">protected</code> - The property can not be changed through the functions (i.e. <code class="inline">object_instance</code> can not be mutated).</li><li><code class="inline">readonly</code> - Annotation that the property should only be readonly (write protected from the BACnet side).</li><li><code class="inline">required</code> - Required property, must always be present.</li><li><code class="inline">validator_fun</code> - Used to verify the property value before inserting.
This function can accept, zero, one or two arguments (the value and the object itself). During object creation,
the function will get a plain map of the currently accumulated properties as object.</li></ul></li></ul><p>The macro will verify the structure. Fields with implicit relationships should always have a default value.
Object creation will otherwise fail.</p><p>When creating an object and a required property has no default and no value is given at creation,
object creation will fail.</p><p>If an object gets created and only one property gets specified of an implicit relationship, the other
property gets automatically added (which explains why it should have a default value).</p><p>An example definition looks like this:</p><pre><code class="makeup elixir" translate="no"><span class="n">bac_object</span><span class="w"> </span><span class="ss">:analog_input</span><span class="w"> </span><span class="k" data-group-id="4701299051-1">do</span><span class="w">
  </span><span class="n">services</span><span class="p" data-group-id="4701299051-2">(</span><span class="ss">intrinsic</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="4701299051-2">)</span><span class="w">

  </span><span class="n">field</span><span class="p" data-group-id="4701299051-3">(</span><span class="ss">:description</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p" data-group-id="4701299051-4">(</span><span class="p" data-group-id="4701299051-4">)</span><span class="p" data-group-id="4701299051-3">)</span><span class="w"> </span><span class="c1"># Optional property</span><span class="w">
  </span><span class="n">field</span><span class="p" data-group-id="4701299051-5">(</span><span class="ss">:device_type</span><span class="p">,</span><span class="w"> </span><span class="nc">String</span><span class="o">.</span><span class="n">t</span><span class="p" data-group-id="4701299051-6">(</span><span class="p" data-group-id="4701299051-6">)</span><span class="p" data-group-id="4701299051-5">)</span><span class="w"> </span><span class="c1"># Optional property</span><span class="w">
  </span><span class="n">field</span><span class="p" data-group-id="4701299051-7">(</span><span class="ss">:out_of_service</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="p" data-group-id="4701299051-8">(</span><span class="p" data-group-id="4701299051-8">)</span><span class="p">,</span><span class="w"> </span><span class="ss">required</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="4701299051-7">)</span><span class="w"> </span><span class="c1"># Required property, has an implicit default value</span><span class="w">
  </span><span class="n">field</span><span class="p" data-group-id="4701299051-9">(</span><span class="ss">:present_value</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="p" data-group-id="4701299051-10">(</span><span class="p" data-group-id="4701299051-10">)</span><span class="p">,</span><span class="w"> </span><span class="ss">required</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">default</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="4701299051-9">)</span><span class="w"> </span><span class="c1"># Required property, has a default value</span><span class="w">
</span><span class="k" data-group-id="4701299051-1">end</span></code></pre><p>For convenience, the <code class="inline">fetch/2</code> function will be implemented for use with the <a href="https://hexdocs.pm/elixir/Access.html"><code class="inline">Access</code></a> behaviour.
All other <a href="https://hexdocs.pm/elixir/Access.html"><code class="inline">Access</code></a> behaviour callbacks/functions will not be implemented.</p><h3 id="bac_object/2-code-generation-properties-and-relationships" class="section-heading"><a href="#bac_object/2-code-generation-properties-and-relationships" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Code Generation, Properties and Relationships</span></h3><p>The following functions for working with objects get generated:</p><ul><li><code class="inline">add_property/3</code></li><li><code class="inline">create/4</code></li><li><code class="inline">cov_reporting?/1</code></li><li><code class="inline">get_object_identifier/1</code></li><li><code class="inline">get_properties/1</code></li><li><code class="inline">has_property?/2</code></li><li><code class="inline">intrinsic_reporting?/1</code></li><li><code class="inline">property_writable?/2</code></li><li><code class="inline">remove_property/2</code></li><li><code class="inline">update_property/3</code></li></ul><p>The <code class="inline">property_writable/2</code> function should be overridden by modules to set certain
properties writable only during certain conditions, if this is required by the object.</p><p>The following functions get generated based on the available properties (priority_array):</p><ul><li><code class="inline">get_priority_value/1</code></li><li><code class="inline">set_priority/3</code></li></ul><p>The following helper functions get generated:</p><ul><li><code class="inline">get_all_properties/0</code></li><li><code class="inline">get_cov_properties/0</code></li><li><code class="inline">get_intrinsic_properties/0</code></li><li><code class="inline">get_optional_properties/0</code></li><li><code class="inline">get_properties_type_map/0</code></li><li><code class="inline">get_protected_properties/0</code></li><li><code class="inline">get_readonly_properties/0</code></li><li><code class="inline">get_required_properties/0</code></li><li><code class="inline">supports_intrinsic/0</code></li></ul><p>The following types get generated:</p><ul><li><code class="inline">common_object_opts/0</code> (for basic BACnet object options)</li><li><code class="inline">property_name/0</code></li><li><code class="inline">property_update_error/0</code></li><li><code class="inline">t/0</code></li></ul><p>The following properties have an implicit default value:</p><ul><li>event_state (<code class="inline">:normal</code>)</li><li>out_of_service (<code class="inline">false</code>)</li><li>status_flags (all bits <code class="inline">false</code>)</li></ul><p>The following implicit relationships exist and do not need to be manually defined:</p><ul><li>priority_array &lt;-&gt; relinquish_default</li></ul><p>The following properties are implicitely protected:</p><ul><li>object_identifier (does not exist on the struct)</li><li>object_type (does not exist on the struct)</li><li>properties_list (does not exist as property on the struct - properties are tracked in metadata)</li></ul><p>Both properties which do not exist are inherited from the module. Properties list is tracked internally
and thus protected from mutation through the functions. These properties need to be dynamically
inherited through the device server for the BACnet side to conform to the BACnet standard.</p><p>For input objects, the device server needs to implement the present value write protection for when
the object is not out of service. The object itself does not provide such a mechanism as it does
not know from where the write is happening (locally from the device or through BACnet).</p><p>The following properties are required for all objects and are automatically defined:</p><ul><li>object_instance (annotated as readonly)</li><li>object_name (annotated as readonly)</li></ul><p>For intrinsic objects, the following properties are automatically defined (with a default value):</p><ul><li>acked_transitions (annotated as readonly)</li><li>event_algorithm_inhibit</li><li>event_algorithm_inhibit_ref</li><li>event_detection_enable</li><li>event_enable</li><li>event_message_texts (annotated as readonly)</li><li>event_message_texts_config</li><li>event_timestamps (annotated as readonly)</li><li>limit_enable</li><li>notify_type</li><li>notification_class</li><li>time_delay</li><li>time_delay_normal</li></ul><p>For commandable objects (objects with a priority array), the present value property is protected,
unless out of service is active. For the duration of out of service, updates to the present value
using <code class="inline">update_property/3</code> are allowed. Once out of service is disabled, the present value is once
again protected from updates, as the present value is updated through the relinquish_default and
priority_array properties.</p><p>Implementors using this macro can &quot;inhibit&quot; an object and verify or mutate the object,
but also return an error. For that a private function can be overridden. The function is called
whenever <code class="inline">create</code>, <code class="inline">add_property</code>, <code class="inline">remove_property</code> (excluding unknown propertes)
and <code class="inline">update_property</code> is used.</p><p>The following private function can be overriden and used a hook:</p><pre><code class="ex">inhibit_object_check(t()) :: {:ok, t()} | {:error, term()}</code></pre><p>It receives the object struct and should return an ok or error tuple.</p><h3 id="bac_object/2-annotations" class="section-heading"><a href="#bac_object/2-annotations" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Annotations</span></h3><p>Annotations can be used for multiple things. There are some that have a special meaning inside the library.</p><p>The following annotations are used currently:</p><ul><li><code class="inline">decoder: decoder()</code> - Function used to decode the ASN.1 value to an Elixir value (the typespec).</li><li><code class="inline">encoder: encoder()</code> - Function used to encode the Elixir value (the typespec) to an ASN.1 value.</li><li><code class="inline">only_when: required_only_when()</code> - See below. Allows a property to &quot;exist&quot; only when the condition is met.</li><li><code class="inline">required_when: required_only_when()</code> - See below. Marks a property as required when the condition is met.</li></ul><p>The encoder and decoder annotations are used by the <a href="BACnet.Protocol.ObjectsUtility.html"><code class="inline">BACnet.Protocol.ObjectsUtility</code></a> module to encode and decode properties.</p><p>Annotations with the key name <code class="inline">required_when</code> and <code class="inline">only_when</code> will be respected, if their value is supported.
<code class="inline">required_when</code> can be used to conditionally require certain properties.</p><p>The following values are supported:</p><ul><li><code class="inline">{:property, Constants.property_identifier()}</code> - The given property must be present in the object.</li><li><code class="inline">{:property, Constants.property_identifier(), value}</code> - The given property must be present
in the object and have the specified value.</li><li><code class="inline">{:property, Constants.property_identifier(), operator, value}</code> - The given property must be present
in the object and have the specified value. The value is compared using the given operator from
the <a href="https://hexdocs.pm/elixir/Kernel.html"><code class="inline">Kernel</code></a> module (must be a function in said module).</li><li><code class="inline">{:opts, atom()}</code> - The given option must be present in the object options (given in <code class="inline">create/4</code>)
and have the value <code class="inline">true</code>.</li><li><code class="inline">{:opts, atom(), value}</code> - The given option must be present in the object options
and have the specified value.</li><li><code class="inline">{:opts, atom(), operator, value}</code> - The given option must be present
in the object options and have the specified value. The value is compared using the given
operator from the <a href="https://hexdocs.pm/elixir/Kernel.html"><code class="inline">Kernel</code></a> module (must be a function in said module).</li><li><code class="inline">(map() -&gt; boolean())</code> - Function with arity 1, receives the currently
accumulated properties. Returning <code class="inline">true</code> means the property is required.</li><li><code class="inline">(map(), map() -&gt; boolean())</code> - Function with arity 2, receives the currently
accumulated properties and the metadata map. Returning <code class="inline">true</code> means the property is required.</li></ul><p>Other values than the supported values get simply ignored - there's no error or warning.</p><p>For example, to have the following field being marked as required (than by default being optional),
it requires the option <code class="inline">:supports_restart</code> to be <code class="inline">true</code>:</p><pre><code class="makeup elixir" translate="no"><span class="n">field</span><span class="p" data-group-id="3411746150-1">(</span><span class="w">
  </span><span class="ss">:last_restart_reason</span><span class="p">,</span><span class="w">
  </span><span class="nc">Constants</span><span class="o">.</span><span class="n">restart_reason</span><span class="p" data-group-id="3411746150-2">(</span><span class="p" data-group-id="3411746150-2">)</span><span class="p">,</span><span class="w">
  </span><span class="ss">annotation</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3411746150-3">[</span><span class="ss">required_when</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3411746150-4">{</span><span class="ss">:opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:supports_restart</span><span class="p" data-group-id="3411746150-4">}</span><span class="p" data-group-id="3411746150-3">]</span><span class="w">
</span><span class="p" data-group-id="3411746150-1">)</span></code></pre><p>When instantiating the instance and the said option is given with the value <code class="inline">true</code>,
then the property is required and must either have a default value or be explicitely given.
If the property does not have a default value or is not given, the instantiation fails with an error.
If the said option is not given (or with any value other than <code class="inline">true</code>), then the property stays optional.</p><p>To have the property only present and can only be instantiated when the property is required,
to meet BACnet requirements to have some properties only present when some condition is met,
the annotation <code class="inline">only_when</code> is supported. It supports the same values as <code class="inline">required_when</code>.</p><p>That means, the optional property can not be used unless the <code class="inline">only_when</code> test passes true.
The exception being remote objects, where all optional properties can always be used,
as these our outside of our responsibility.</p><h3 id="bac_object/2-extendibility" class="section-heading"><a href="#bac_object/2-extendibility" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Extendibility</span></h3><p>Object types can be extended at compile time by the user to provide additional properties.
Use the application <code class="inline">:bacstack</code> and key <code class="inline">:objects_additional_properties</code> to provide a map or keyword list,
keyed by the object type as atom, with an AST of additional properties (as if you were to provide them directly).
Make sure that the used property identifiers are already defined (either by the library or at compile time by the user).</p><p>Example (<code class="inline">config/config.exs</code>):</p><pre><code class="makeup elixir" translate="no"><span class="n">config</span><span class="w"> </span><span class="ss">:bacstack</span><span class="p">,</span><span class="w"> </span><span class="ss">:additional_property_identifiers</span><span class="p">,</span><span class="w"> </span><span class="ss">loop_enable</span><span class="p">:</span><span class="w"> </span><span class="mi">523</span><span class="p">,</span><span class="w"> </span><span class="ss">loop_mode</span><span class="p">:</span><span class="w"> </span><span class="mi">524</span><span class="w">

</span><span class="n">config</span><span class="w"> </span><span class="ss">:bacstack</span><span class="p">,</span><span class="w"> </span><span class="ss">:objects_additional_properties</span><span class="p">,</span><span class="w">
  </span><span class="ss">loop</span><span class="p">:</span><span class="w">
    </span><span class="p" data-group-id="3462521302-1">(</span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="3462521302-2">do</span><span class="w">
      </span><span class="n">field</span><span class="p" data-group-id="3462521302-3">(</span><span class="ss">:loop_enable</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="p" data-group-id="3462521302-4">(</span><span class="p" data-group-id="3462521302-4">)</span><span class="p">,</span><span class="w"> </span><span class="ss">encode_as</span><span class="p">:</span><span class="w"> </span><span class="ss">:enumerated</span><span class="p" data-group-id="3462521302-3">)</span><span class="w">

      </span><span class="n">field</span><span class="p" data-group-id="3462521302-5">(</span><span class="ss">:loop_mode</span><span class="p">,</span><span class="w"> </span><span class="ss">:bacnet_loop</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">:plc_loop</span><span class="p">,</span><span class="w">
        </span><span class="ss">bac_type</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3462521302-6">{</span><span class="ss">:in_list</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3462521302-7">[</span><span class="ss">:bacnet_loop</span><span class="p">,</span><span class="w"> </span><span class="ss">:plc_loop</span><span class="p" data-group-id="3462521302-7">]</span><span class="p" data-group-id="3462521302-6">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">annotation</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3462521302-8">[</span><span class="w">
          </span><span class="ss">encoder</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="3462521302-9">{</span><span class="ss">:enumerated</span><span class="p">,</span><span class="w"> </span><span class="k">if</span><span class="p" data-group-id="3462521302-10">(</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="ss">:plc_loop</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">else</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="3462521302-10">)</span><span class="p" data-group-id="3462521302-9">}</span><span class="p">,</span><span class="w">
          </span><span class="ss">decoder</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="k">if</span><span class="p" data-group-id="3462521302-11">(</span><span class="ni">&amp;1</span><span class="o">.</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ss">:plc_loop</span><span class="p">,</span><span class="w"> </span><span class="ss">else</span><span class="p">:</span><span class="w"> </span><span class="ss">:bacnet_loop</span><span class="p" data-group-id="3462521302-11">)</span><span class="w">
        </span><span class="p" data-group-id="3462521302-8">]</span><span class="w">
      </span><span class="p" data-group-id="3462521302-5">)</span><span class="w">
    </span><span class="k" data-group-id="3462521302-2">end</span><span class="p" data-group-id="3462521302-1">)</span></code></pre>
  </section>
</section>
<section class="detail" id="define_bacnet_object/3">

  <div class="detail-header">
    <a href="#define_bacnet_object/3" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">define_bacnet_object(object_type, ast, env)</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L560" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> define_bacnet_object(
  <a href="BACnet.Protocol.Constants.html#t:object_type/0">BACnet.Protocol.Constants.object_type</a>(),
  <a href="https://hexdocs.pm/elixir/Macro.html#t:t/0">Macro.t</a>(),
  <a href="https://hexdocs.pm/elixir/Macro.Env.html#t:t/0">Macro.Env.t</a>()
) ::
  <a href="https://hexdocs.pm/elixir/Macro.html#t:t/0">Macro.t</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">no_return</a>()</pre>

      </div>

<p>Defines a BACnet object. This function produces AST from the given BACnet object definition.
For a description of what it does, see the <a href="#bac_object/2"><code class="inline">bac_object/2</code></a> macro.</p>
  </section>
</section>
<section class="detail" id="get_default_bacnet_datetime/0">

  <div class="detail-header">
    <a href="#get_default_bacnet_datetime/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_default_bacnet_datetime()</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L192" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_bacnet_datetime() :: <a href="BACnet.Protocol.BACnetDateTime.html#t:t/0">BACnet.Protocol.BACnetDateTime.t</a>()</pre>

      </div>

<p>Get a default BACnet DateTime with every field <code class="inline">:unspecified</code>.</p>
  </section>
</section>
<section class="detail" id="get_default_bacnet_timestamp/0">

  <div class="detail-header">
    <a href="#get_default_bacnet_timestamp/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_default_bacnet_timestamp()</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L213" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_bacnet_timestamp() :: <a href="BACnet.Protocol.BACnetTimestamp.html#t:t/0">BACnet.Protocol.BACnetTimestamp.t</a>()</pre>

      </div>

<p>Get a default BACnet Timestamp with a <a href="https://hexdocs.pm/elixir/DateTime.html"><code class="inline">DateTime</code></a> and every field <code class="inline">:unspecified</code>.</p>
  </section>
</section>
<section class="detail" id="get_default_dev_object_ref/0">

  <div class="detail-header">
    <a href="#get_default_dev_object_ref/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_default_dev_object_ref()</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L248" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_dev_object_ref() :: <a href="BACnet.Protocol.DeviceObjectPropertyRef.html#t:t/0">BACnet.Protocol.DeviceObjectPropertyRef.t</a>()</pre>

      </div>

<p>Get a default BACnet Device Object Property Reference. References a BI object with the
highest instance number, referencing the highest property identifier.</p><p>The highest instance number usually represents an uninitialized property.</p>
  </section>
</section>
<section class="detail" id="get_default_event_message_texts/0">

  <div class="detail-header">
    <a href="#get_default_event_message_texts/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_default_event_message_texts()</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L221" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_event_message_texts() :: <a href="BACnet.Protocol.EventMessageTexts.html#t:t/0">BACnet.Protocol.EventMessageTexts.t</a>()</pre>

      </div>

<p>Get a default BACnet Event Message Texts with default English strings.</p>
  </section>
</section>
<section class="detail" id="get_default_event_transbits/1">

    <span id="get_default_event_transbits/0"></span>

  <div class="detail-header">
    <a href="#get_default_event_transbits/1" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_default_event_transbits(default_value \\ true)</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L233" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_event_transbits(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()) ::
  <a href="BACnet.Protocol.EventTransitionBits.html#t:t/0">BACnet.Protocol.EventTransitionBits.t</a>()</pre>

      </div>

<p>Get a default BACnet Event Transition Bits with each bit set to a specific value.</p>
  </section>
</section>
<section class="detail" id="get_default_object_ref/0">

  <div class="detail-header">
    <a href="#get_default_object_ref/0" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">get_default_object_ref()</h1>


        <a href="https://github.com/bacnet-ex/bacstack/blob/master/lib/bacnet/protocol/objects_macro.ex#L268" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_default_object_ref() :: <a href="BACnet.Protocol.ObjectPropertyRef.html#t:t/0">BACnet.Protocol.ObjectPropertyRef.t</a>()</pre>

      </div>

<p>Get a default BACnet Object Property Reference. References a BI object with the
highest instance number, referencing the highest property identifier.</p><p>The highest instance number usually represents an uninitialized property
(such as in the case for <code class="inline">event_algorithm_inhibit_ref</code>).</p>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">

        <p>

            <span class="line">
              <a href="https://hex.pm/packages/bacstack/0.1.0">Hex Package</a>

              <a href="https://preview.hex.pm/preview/bacstack/0.1.0">Hex Preview</a>

            </span>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Go to package docs">
              Go to package docs
            </button>

              <a href="llms.txt" target="_blank">
                View llms.txt
              </a>


              <a href="bacstack.epub">
                Download ePub version
              </a>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.40.1) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>


    </footer>
  </div>
</main>
</div>
<!-- Markdown for details HTML tags & sortable tables -->
<script>
  class TableSortableColumns {
    constructor(tableNode) {
      this.tableNode = tableNode;
      this.columnHeaders = tableNode.querySelectorAll('thead th');
      this.sortColumns = [];

      for (var i = 0; i < this.columnHeaders.length; i++) {
        var ch = this.columnHeaders[i];

        if (ch) {
          ch.innerHTML += '<span aria-hidden="true"></span>';
          this.sortColumns.push(i);
          ch.setAttribute('data-column-index', i);
          ch.addEventListener('click', this.handleClick.bind(this));
        }
      }
    }

    setColumnHeaderSort(columnIndex) {
      if (typeof columnIndex === 'string') {
        columnIndex = parseInt(columnIndex);
      }

      for (var i = 0; i < this.columnHeaders.length; i++) {
        var ch = this.columnHeaders[i];

        if (i === columnIndex) {
          var value = ch.getAttribute('aria-sort');

          if (value === 'ascending') {
            ch.setAttribute('aria-sort', 'descending');
            this.sortColumn(
              columnIndex,
              'descending',
              ch.classList.contains('num')
            );
          } else {
            ch.setAttribute('aria-sort', 'ascending');
            this.sortColumn(
              columnIndex,
              'ascending',
              ch.classList.contains('num')
            );
          }
        } else if (ch.hasAttribute('aria-sort')) {
          ch.removeAttribute('aria-sort');
        }
      }
    }

    sortColumn(columnIndex, sortValue, isNumber) {
      function compareValues(a, b) {
        isNumber = !isNaN(parseFloat(a.value)) && !isNaN(parseFloat(b.value))

        if (sortValue === 'ascending') {
          if (a.value === b.value) {
            return 0;
          } else {
            if (isNumber) {
              return a.value - b.value;
            } else {
              return a.value < b.value ? -1 : 1;
            }
          }
        } else {
          if (a.value === b.value) {
            return 0;
          } else {
            if (isNumber) {
              return b.value - a.value;
            } else {
              return a.value > b.value ? -1 : 1;
            }
          }
        }
      }

      if (typeof isNumber !== 'boolean') {
        isNumber = false;
      }

      var tbodyNode = this.tableNode.querySelector('tbody');
      var rowNodes = [];
      var dataCells = [];

      var rowNode = tbodyNode.firstElementChild;

      var index = 0;
      while (rowNode) {
        rowNodes.push(rowNode);

        var rowCells = rowNode.querySelectorAll('th, td');
        var dataCell = rowCells[columnIndex];
        var data = {};

        data.index = index;
        data.value = dataCell.textContent.toLowerCase().trim();
        if (isNumber) {
          data.value = parseFloat(data.value);
        }

        dataCells.push(data);
        rowNode = rowNode.nextElementSibling;
        index += 1;
      }

      dataCells.sort(compareValues);

      while (tbodyNode.firstChild) {
        tbodyNode.removeChild(tbodyNode.lastChild);
      }

      for (var i = 0; i < dataCells.length; i += 1) {
        tbodyNode.appendChild(rowNodes[dataCells[i].index]);
      }
    }

    handleClick(event) {
      var target = event.currentTarget;
      this.setColumnHeaderSort(target.getAttribute('data-column-index'));
    }
  }

  var js_loaded = false;
  var loaded_fired_before_ready = false;

  var prepare_body = function () {
    if (!js_loaded) return;

    // This is the part where we load the <details> contents,
    // parse it using markdown and push the HTML back
    var converter = new showdown.Converter({});
    converter.setFlavor('github');

    var details = document.querySelectorAll('details');
    for (var i = 0; i < details.length; i++) {
      details[i].innerHTML = converter.makeHtml(details[i].innerHTML);
    }

    // Now apply sortable tables, because <details> could contain tables
    var tables = document.querySelectorAll('table');
    for (var i = 0; i < tables.length; i++) {
      new TableSortableColumns(tables[i]);
    }
  };

  document.addEventListener('DOMContentLoaded', function () {
    js_loaded = true;

    if (loaded_fired_before_ready) {
      loaded_fired_before_ready = false;
      prepare_body();
    }
  });

  window.addEventListener('exdoc:loaded', function () {
    if (!js_loaded) {
      loaded_fired_before_ready = true;
      return;
    }

    prepare_body();
  });
</script>

  </body>
</html>
